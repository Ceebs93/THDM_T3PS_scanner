# Tasks for Magellan 

- [X] Confirm upgrade of 2HDMC/HB/HS has been successful
- [X] Create job running interface for local MCMC jobs
- [X] Create job running interface for local madgraph jobs
- [X] Create job running interface for Torque jobs
- [X] Replace python script for splitting csves with a faster script i.e. Bash or C++
- [X] Install LHAPDF successfully
- [ ] ~~Ensure LHAPDF is integrated into 2HDMC etc~~
- [X] Upload conversion tools for dat to csv files from MCMC output and edit appropriately
- [X] Edit merge-jobs for MadGraph to ensure it is functional for csves
- [X] Rename SusHi directory to MadGraph
- [X] Install MadGraph and test running of pipeline including MadGraph
- [X] Update auto-install file to reflect the package upgrades
- [X] Create a "initial-start-up.sh" to identify the top directory of installation and set this equal to $THDM_T3PS_scanner and write this directory to normal-start-up so that we can source it from any dir and still have the correct path, to identify current environment variables such as compilers, should set variables equal to these so that in auto_install.sh we can ask the user if they are happy to use these
- [ ] Edit auto-install file to run intial-start-up.sh and request user confirmation/input for compilers and environments
- [X] Create a "normal-start-up.sh" to be run at the begining of each use, use code from source env.sh so that it will set $THDM_T3PS_scanner and look for an env_local.sh to source
- [X] LHAPDF needs to be edited so that the config file will find the correct parts of python in conda - Ended up using the LHAPDF installation in MadGraph instead. Should still be reachable by 2HDMC
- [X] Create job running interfaces for the ~~SusHi~~ Madgraph pipeline
- [X] Edit all non T3PS python files so that functions have appropriate docstrings
- [ ] Work on installation guide for main directory
- [ ] ~Create docker and install ubuntu 20, Make 3.22, GCC 11.1.0, GSL 2.6, python2.7~
- [ ] ~Install necessecary python modules to docker, pandas, numpy, scipy, hd5f etc~
- [ ] ~Install Magellan to the docker~
- [ ] ~Test Magellan in docker works~
- [ ] Add MCMC theory to manual
- [ ] Add description of T3PS to manual
- [ ] Add 2HDM theory to manual
- [ ] Add usage of parameter-point generation pipeline, on cluster and locally to manual
- [ ] Add usage of full MadGraph pipline, on cluster and locally to manual
- [ ] Add description of parameterprocessor set up and compilation to manual
- [ ] Add description of how to change model type
- [ ] Add brief description of Madgraph usage
- [ ] Perform checks on points produced by final installation
- [ ] Add performance to manual
- [ ] Add explanation of config file for MCMC runs and how to change it to manual
- [X] Add current python processing modules into main part of Magellan, get working in python2.7
- [ ] Tidy up print statements in python files so that only essential information is printed out. Perhaps simply commenting out some of the other statements as suggested debugging ones (mention this in manual if you do so)
- [ ] Remove unnessecary parts of T3PS (though mention their existence in the original software should users wish to add it back)
- [X] Add templates for different bases (i.e. hybrid, mass etc)
- [X] Add config examples for at least two bases
- [X] Add method for changing the basis being used in Parameterprocessor from MCMC folder with Makefile
- [ ] Add method for changing the model type in both the template file and the parameterprocessor file from MCMC

# Stretch Tasks for Magellan

- [ ] Look into uncoupling 2HDMC from parameter-processor in order to allow for people to use other models. This will require editing the config file for MCMC runs
- [ ] Add future plans for Magellan to manual
- [ ] Create some example config files
- [ ] Add the option for the Madgraph section to keep additional files, i.e. those that would be needed for madevent etc.
- [ ] Edit T3PS files to give functions appropriate docstrings
- [ ] Make it so that the process to be run in madgraph is edited by the Makefile instead of the user having to go down into the templates
- [ ] Add section to create-jobs for MadGraph to work with h5f files if that is what the user chooses
- [ ] Add usage of processing modules to get csv or hd5f output.
- [ ] Create singularity and install ubuntu 20, Make 3.22, GCC 11.1.0, GSL 2.6, python2.7
- [ ] Install necessecary python modules to singularity, pandas, numpy, scipy, hd5f etc
- [ ] Install Magellan to the singularity
- [ ] Test Magellan in singularity works
